generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["tracing", "extendedWhereUnique"]
}

datasource db {
  provider = "mongodb"
  url      = env("MONGO_URL")
}

type RankingEntryData {
  combo      Int
  count      Int[]
  playCount  Int
  playNumber Int
  recordedAt DateTime @db.Date
  score      Int
  total      Int
}

model LegacyUser {
  id             String   @id @map("_id")
  createdAt      DateTime @db.Date
  email          String
  emailVerified  Boolean
  hashedPassword String
  updatedAt      DateTime @db.Date
  username       String
}

model Player {
  id         String  @id @map("_id")
  linkedTo   String?
  playerName String  @unique(map: "playerName_1")

  @@index([linkedTo], map: "linkedTo_1")
}

model FirebasePlayerLink {
  firebaseUid String @id @map("_id")
  playerId    String @unique(map: "playerId_1")
}

model RankingEntry {
  id        String           @id @default(auto()) @map("_id") @db.ObjectId
  data      RankingEntryData
  md5       String
  playMode  String
  playerId  String
  updatedAt DateTime         @db.Date

  @@unique([md5, playMode, playerId], map: "md5_1_playMode_1_playerId_1")
}
